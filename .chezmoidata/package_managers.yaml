---
package_manager:
  homebrew:
    command: 'brew'
    sudo: false
    install_args: 'bundle install --no-upgrade --file=/dev/stdin'
    update_args: 'update'
    pass_packages_via_stdin: true
    list_template: 'homebrew_package_list.tmpl'
    env:
      HOMEBREW_NO_ENV_HINTS: '1'
    install_script: |
      if [ "$(command -v curl)" ]; then
          /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
      elif [ "$(command -v wget)" ]; then
          /bin/bash -c "$(wget -qO- https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
      else
          echo "ERROR: Cannot install homebrew without curl or wget." >&2
          exit 1
      fi
      if [ ! "$(command -v brew)" ]; then
        if [[ -x /opt/homebrew/bin/brew ]]; then
          BREW_LOCATION="/opt/homebrew/bin"
        elif [[ -x /usr/local/bin/brew ]]; then
          BREW_LOCATION="/usr/local/bin"
        elif [[ -x /home/linuxbrew/.linuxbrew/bin/brew ]]; then
          BREW_LOCATION="/home/linuxbrew/.linuxbrew/bin"
        elif [[ -x "$HOME/.linuxbrew/bin/brew" ]]; then
          BREW_LOCATION="$HOME/.linuxbrew/bin"
        else
          echo "ERROR: Cannot locate installed homebrew binary!" >&2
          exit 1
        fi

        export PATH=${PATH}:${BREW_LOCATION}
      fi

  apk:
    command: 'apk'
    sudo: true
    install_args: 'add --force'
    update_args: 'update'
    pass_packages_via_stdin: false
  
  apt:
    command: 'apt-get'
    sudo: true
    install_args: '-y install'
    update_args: 'update'
    pass_packages_via_stdin: false
