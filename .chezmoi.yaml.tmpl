{{- /* Checks if running interactively */ -}}
{{- $interactive := stdinIsATTY -}}
{{- $profileDirs := output "ls" (printf "%s/.chezmoidata/profiles" .chezmoi.sourceDir) | trim | splitList "\n" | sortAlpha -}}
{{- $availableProfiles := list -}}
{{- range $_, $profileDir := $profileDirs -}}
{{-   $availableProfiles = append $availableProfiles (title $profileDir) -}}
{{- end }}
{{- $activeProfiles := promptMultichoice "Select the profiles you would like to activate for this machine (optional)"
    $availableProfiles (list)
-}}

data:
  available_profiles: {{ $availableProfiles | toYaml | nindent 4 }}
  active_profiles: {{ $activeProfiles | toYaml | nindent 4 }}

# hooks:
#     init:
#         post:
#             command: "echo"
#             args:
#                 - "post-init-hook"

#     apply:
#         pre:
#             command: "echo"
#             args:
#                 - "pre-apply-hook"
